<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="geeknees">
<meta name="dcterms.date" content="2023-08-05">

<title>Code Snippet Chronicles - openai functions and embeddings</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Code Snippet Chronicles</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/geeknees/quarto" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/_geeknees" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml" rel="" target=""><i class="bi bi-rss" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">openai functions and embeddings</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">ai</div>
                <div class="quarto-category">ruby</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>geeknees </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 5, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#basic" id="toc-basic" class="nav-link active" data-scroll-target="#basic">Basic</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a></li>
  <li><a href="#embeddings" id="toc-embeddings" class="nav-link" data-scroll-target="#embeddings">Embeddings</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<section id="basic" class="level2">
<h2 class="anchored" data-anchor-id="basic">Basic</h2>
<div class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span> <span class="st">"openai"</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="dt">OpenAI</span><span class="at">.configure</span> <span class="cf">do</span> <span class="kw">|</span>config<span class="kw">|</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>  config<span class="at">.access_token</span> <span class="kw">=</span> <span class="cn">ENV</span><span class="at">.fetch</span>(<span class="vs">'OPENAI_ACCESS_TOKEN'</span>, <span class="dv">nil</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>client <span class="kw">=</span> <span class="dt">OpenAI</span><span class="kw">::</span><span class="dt">Client</span><span class="at">.new</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>response <span class="kw">=</span> client<span class="at">.chat</span>(</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>    <span class="wa">parameters: </span><span class="kw">{</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>        <span class="wa">model: </span><span class="st">"gpt-3.5-turbo"</span>, <span class="co"># Required.</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>        <span class="wa">messages: </span><span class="kw">[{</span> <span class="wa">role: </span><span class="st">"user"</span>, <span class="wa">content: </span><span class="st">"Hello!"</span><span class="kw">}]</span>, <span class="co"># Required.</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>        <span class="wa">temperature: </span><span class="fl">0.7</span>,</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span>)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">puts</span> response<span class="at">.dig</span>(<span class="st">"choices"</span>, <span class="dv">0</span>, <span class="st">"message"</span>, <span class="st">"content"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Hello! How can I assist you today?</code></pre>
</div>
</div>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<div class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="cf">def</span> get_current_weather(location:, <span class="wa">unit: </span><span class="st">"fahrenheit"</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">puts</span> <span class="st">"</span><span class="sc">#{</span>location<span class="sc">}</span><span class="st">, </span><span class="sc">#{</span>unit<span class="sc">}</span><span class="st">"</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># use a weather api to fetch weather</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>response <span class="kw">=</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  client<span class="at">.chat</span>(</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>    <span class="wa">parameters: </span><span class="kw">{</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>      <span class="wa">model: </span><span class="st">"gpt-3.5-turbo-0613"</span>,</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>      <span class="wa">messages: </span><span class="kw">[</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">{</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>          <span class="st">"role"</span>: <span class="st">"user"</span>,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>          <span class="st">"content"</span>: <span class="st">"What is the weather like in San Francisco?"</span>,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>        <span class="kw">}</span>,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>      <span class="kw">]</span>,</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>      <span class="wa">functions: </span><span class="kw">[</span></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        <span class="kw">{</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>          <span class="wa">name: </span><span class="st">"get_current_weather"</span>,</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>          <span class="wa">description: </span><span class="st">"Get the current weather in a given location"</span>,</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>          <span class="wa">parameters: </span><span class="kw">{</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>            <span class="wa">type: :object</span>,</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>            <span class="wa">properties: </span><span class="kw">{</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>              <span class="wa">location: </span><span class="kw">{</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>                <span class="wa">type: :string</span>,</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>                <span class="wa">description: </span><span class="st">"The city and state, e.g. San Francisco, CA"</span>,</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>              <span class="kw">}</span>,</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>              <span class="wa">unit: </span><span class="kw">{</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>                <span class="wa">type: </span><span class="st">"string"</span>,</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>                <span class="wa">enum: </span><span class="ot">%w[</span><span class="st">celsius fahrenheit</span><span class="ot">]</span>,</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>              <span class="kw">}</span>,</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>            <span class="kw">}</span>,</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>            <span class="wa">required: </span><span class="kw">[</span><span class="st">"location"</span><span class="kw">]</span>,</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>          <span class="kw">}</span>,</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>        <span class="kw">}</span>,</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>      <span class="kw">]</span>,</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span>,</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>message <span class="kw">=</span> response<span class="at">.dig</span>(<span class="st">"choices"</span>, <span class="dv">0</span>, <span class="st">"message"</span>)</span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a><span class="fu">puts</span> message</span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> message<span class="kw">[</span><span class="st">"role"</span><span class="kw">]</span> <span class="kw">==</span> <span class="st">"assistant"</span> <span class="kw">&amp;&amp;</span> message<span class="kw">[</span><span class="st">"function_call"</span><span class="kw">]</span></span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>  function_name <span class="kw">=</span> message<span class="at">.dig</span>(<span class="st">"function_call"</span>, <span class="st">"name"</span>)</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>  args <span class="kw">=</span></span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>    <span class="cn">JSON</span><span class="at">.parse</span>(</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>      message<span class="at">.dig</span>(<span class="st">"function_call"</span>, <span class="st">"arguments"</span>),</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>      <span class="kw">{</span> <span class="wa">symbolize_names: </span><span class="dv">true</span> <span class="kw">}</span>,</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>  <span class="cf">case</span> function_name</span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>  <span class="cf">when</span> <span class="st">"get_current_weather"</span></span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>    get_current_weather(<span class="kw">**</span>args)</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{"role"=&gt;"assistant", "content"=&gt;nil, "function_call"=&gt;{"name"=&gt;"get_current_weather", "arguments"=&gt;"{\n\"location\": \"San Francisco, CA\"\n}"}}
San Francisco, CA, fahrenheit</code></pre>
</div>
</div>
</section>
<section id="embeddings" class="level2">
<h2 class="anchored" data-anchor-id="embeddings">Embeddings</h2>
<div class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>response <span class="kw">=</span> client<span class="at">.embeddings</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="wa">parameters: </span><span class="kw">{</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="wa">model: </span><span class="st">"text-embedding-ada-002"</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>        <span class="wa">input: </span><span class="st">"The king is naked, the king's ears are donkey ears..."</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">puts</span> response<span class="at">.dig</span>(<span class="st">"data"</span>, <span class="dv">0</span>, <span class="st">"embedding"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>-0.0047493386
-0.016024632
0.0054733814
-0.008631102
-0.002707984
0.01645842
-0.024024189
-0.022403864
-0.005428727
-0.011303999
0.003282115
-0.00012519244
0.025759341
-0.014098103
-0.00639837
0.015692912
0.021344911
0.008720411
0.022148695
-0.00088352367
-0.008178176
0.00034288375
-0.024419703
0.008401449
0.01745358
-0.008407828
0.014761544
-0.010500217
0.014391548
-0.014901887
0.0014273532
0.007865594
-0.0005888829
-0.009505056
-0.028068623
0.0050427835
0.0011897269
-0.016318077
0.027660351
-0.009817638
-0.010870212
0.00540321
0.001255114
0.003266167
-0.02676726
0.009128681
0.014110862
-0.03733127
-0.0021322584
0.013485697
0.0121460585
-0.0058880313
-0.006197424
0.0041114152
-0.014289481
0.01786185
-0.01754289
-0.0022805757
0.0033841827
-0.0057540676
0.008847996
-0.0033363386
0.0033459074
-0.009562469
-0.008509896
-0.020081824
0.0033554763
-0.00839507
-0.016892208
0.0025469086
0.048762854
0.012809498
-0.026920361
-0.030518249
0.019635277
0.00016785355
-0.021179052
0.018997354
0.010028154
0.00051671785
0.010895729
-0.040852603
-0.017721508
0.02302903
0.017568406
0.0064685415
-5.9107577e-05
0.0259252
0.011437964
-0.02334799
-0.006870433
0.0009879837
0.022863168
0.004953474
-0.037254717
0.0052660564
0.0042868443
0.016318077
-0.005476571
-0.014468099
0.006704573
0.0036074559
-0.0063696634
-0.0031896161
-0.011565548
0.006691815
-0.0072021536
-0.005221402
-0.00822921
-0.014978438
0.01338363
0.02394764
0.03164099
-0.054555196
-0.0010780903
-0.024611078
0.023756262
0.0009409368
-0.01903563
-0.04207742
0.027890004
0.016394628
-0.008688514
-0.008720411
0.012362952
0.010079187
-0.024840731
-0.02609106
-0.030237561
-0.0061623384
0.043072578
-0.0017335564
0.011903647
0.025300035
-0.008203693
-0.0008300976
-0.00789749
0.021000434
0.012503295
-1.4751975e-05
0.0073169796
0.015054989
-0.008458862
-0.0013228933
0.0017877799
0.023245923
0.005112955
0.012886049
0.0051990743
-0.002634623
0.013779142
-0.0093264375
0.04297051
-0.036616795
0.017925642
0.009996257
-0.014327756
0.021102501
0.0057508782
-0.010047291
0.001770237
0.033197526
0.010946763
-0.01321777
0.025478654
0.029829292
0.01662428
0.012783982
0.0033267697
0.01171865
0.017070826
0.013370872
-0.0086055845
0.02184249
0.008018695
0.025733823
-1.4913948e-05
0.009275404
-0.005135282
0.0018404085
-0.045802888
0.011858993
0.01097228
0.024330392
-0.006966122
0.007795422
-0.008139901
-0.019265281
0.0012925919
0.0020828194
0.0177853
0.006615264
-0.019979756
-0.0076359413
-0.66344017
-0.0048705437
-0.010238668
0.01196744
0.014314998
-0.0024847111
-0.0045802887
0.0047589075
-0.023003513
-0.005677517
-0.007993178
0.0052309707
0.020706989
-0.009103165
-0.017810818
-0.013421905
0.003935986
-0.01960976
0.014595684
0.0032693567
-0.007572149
-0.008184555
0.012273643
0.0033841827
0.004296413
-0.0022502742
0.024215566
0.01636911
-0.01811702
-0.0010661292
-0.038989868
0.0031784526
0.009875052
0.010621422
0.04314913
-0.01238847
-0.018333914
0.01844874
0.003066816
0.030314112
-0.018844252
0.0023156614
0.009275404
-0.020745264
-0.014149138
0.012643639
0.020617679
-0.015756704
-0.010009016
0.0033682347
-8.2431645e-05
0.014366032
-0.0018276501
0.019048387
-0.036871962
0.006076219
0.029803773
0.004596237
-0.0012367737
0.009166957
-0.00022925367
-0.0020812245
-0.028323792
0.011782442
0.0003079973
0.01671359
-0.0105831465
0.024062464
0.008962821
-0.026486574
0.015093264
0.013779142
0.0046664085
0.01579498
-0.004223052
0.025504172
0.00061559596
-0.017925642
-0.008981959
0.0018499774
-0.013651557
0.02135767
-0.022582483
0.010570388
0.016267043
-0.0071000857
-0.016637038
0.006487679
0.011278483
-0.013485697
0.0015740755
0.0227611
0.002808457
0.0031561253
0.019711828
0.01022591
-0.01537395
0.023871088
0.002068466
-0.022340072
0.0024847111
-0.023194889
-0.024598321
-0.0047238218
0.03490716
0.03164099
-0.02584865
0.012509675
0.05435106
-0.013945002
-0.003199185
0.019163214
0.006490869
0.016024632
0.012260885
-0.028323792
0.018142536
0.0042900336
0.019788379
-0.00805697
0.016662555
0.022263521
0.023654195
-0.03281477
-0.0016633848
0.030033426
-0.028527927
-0.022467656
-0.029114816
0.0021513961
0.010251426
-0.007776284
0.01553981
-0.007655079
0.025657272
-0.00523416
0.029293435
-0.0012128516
0.020987675
-0.023169372
-0.00016645809
0.0075338734
0.0089117875
0.0055722594
-0.0048992503
-0.030135494
-0.018180812
-0.016751865
-0.0076168035
0.0186146
-0.02533831
-0.008835237
-0.010098325
-0.021982836
0.025274519
0.013575006
-0.030109977
-0.009894189
-0.015858771
-0.00648449
0.027992072
0.019137697
-0.053636584
-0.009096785
-0.000507149
-0.00639837
0.015922565
0.02625692
-0.010034532
-0.03756092
0.00019516464
-0.013141219
0.012745706
0.01254795
-0.027124496
-0.005706223
0.0042645168
-0.03641266
-0.013970519
0.015054989
-0.0050714896
0.008178176
-0.020375269
-0.0116867535
0.026869327
0.0017718318
-0.007074569
-0.010519355
-0.026461056
0.006691815
-0.04223052
-0.0073680133
-0.012369332
-0.00028706546
0.032636154
-0.0029806963
0.0032565983
0.022008352
0.030671349
0.03133479
0.002044544
-0.012937083
0.01279674
0.003374614
0.010270564
-0.02410074
-0.0020429492
-0.007521115
0.0147360265
-0.0011554385
0.0047429595
-0.0111190025
0.012917946
0.008350415
0.0041783974
0.03365683
-0.00032952722
-0.0012710621
-0.004915199
-0.0034384062
0.0008627912
-0.0024751422
-0.007661458
0.011463481
-0.016075665
0.007521115
0.0013643584
0.01603739
-0.016088424
-0.034039583
-0.008962821
-0.007929386
0.011131761
-0.006305871
-0.017721508
0.0054701916
0.013893968
0.0019663984
0.013472939
-0.0026489762
-0.01810426
0.032636154
0.0015230417
0.013804659
0.009747467
0.006206993
0.011488997
0.022646274
-0.0041528805
-0.0068449164
0.0149656795
-0.01395776
-0.014289481
-0.009568849
0.022505932
-0.024355909
0.01819357
0.008267486
0.010691593
0.02934447
0.016841173
-0.012139679
0.008816099
-0.0020062686
0.048150446
-0.0033459074
0.0033841827
-0.0046919254
-0.0051895054
0.015003955
0.00274307
0.019124938
0.012860533
-0.006666298
0.0012439503
0.029829292
-0.00390728
0.0022630326
0.017810818
0.019788379
0.009517815
-0.034856126
0.023156613
0.009658158
-0.0015326106
-0.016356353
-0.023526609
0.011125381
-0.032100298
0.04738494
-0.009466781
0.026971394
0.013970519
-0.0048609753
0.0012407607
-0.026307955
0.017644957
-0.00017104317
0.013141219
-0.009926085
0.0073106005
-0.0023619109
-0.00017493051
0.005600966
0.019341832
-0.002891387
-0.015054989
-0.0082993815
0.012898808
-0.014098103
-0.011667616
0.010602284
0.013102943
-0.008854374
0.007655079
0.018512532
-0.02618037
-0.011093485
0.033120975
0.015935322
-0.017377028
-0.018155295
0.0012439503
0.017262204
0.10512975
-0.00863748
0.0085290335
0.020094583
0.037867125
-0.00032753372
-0.02293972
-0.027124496
-0.0035372844
0.008956443
-0.0054574334
-0.0013563843
0.005798722
0.010876591
0.026027268
-0.020056307
-0.013830176
-0.015157056
-0.0058497563
-0.00075354683
-0.03490716
0.006915088
-0.0048514064
0.018078744
-0.019150456
-0.026690708
0.002707984
0.030441698
-0.008694894
-0.020758022
0.0093264375
0.0015509509
0.005030025
0.00081893394
-0.007738009
-0.0053298487
-0.0060283747
0.0137919
0.009441264
-0.01679014
0.0096454
0.0033586659
0.006385612
-0.02783897
0.027047945
-0.012088645
-0.015820496
0.017632198
-0.019750103
-0.007769905
0.03980641
-0.0035628013
0.006608885
-0.017172894
0.033784416
0.01745358
-0.007189395
0.007974041
-0.0006040336
0.018423224
-0.011788822
-0.007846456
-0.00060004654
-0.00042621247
-0.016853932
-0.013115702
-0.030952036
0.009485919
-0.041235358
0.014914646
-0.0037414199
-0.010882971
-0.02369247
0.003929607
-0.011865372
0.0046919254
0.007980419
-0.013766384
0.0013555869
0.004503738
0.0047908034
-0.0058306186
-0.01761944
-0.016637038
-0.027303115
0.011858993
0.00540002
0.011023314
-0.04628771
-0.0023491522
0.012937083
0.01728772
0.003374614
-0.008937305
0.0051480406
-0.024304876
0.004124174
0.0020142426
-0.004239
-0.0034160789
0.0062644063
-0.021561805
0.004934336
-0.0009824018
0.026614157
-0.016904965
-0.004809941
-0.00040687542
-0.021753183
-0.0011929164
-0.012854153
-0.0006076219
-0.03447337
-0.014327756
-0.0053617447
0.0049662325
0.017249444
0.016343594
0.009466781
0.00923075
-0.0038275395
-0.023245923
0.023564884
0.037254717
-0.0030731952
0.02817069
0.0024942798
-0.020923883
-0.01920149
0.008076108
0.001928123
-0.0006674272
-0.0041592596
-0.020324234
-0.022046627
0.006672677
-0.016190492
0.004047623
-0.025389345
-0.004503738
-0.017249444
-0.022812136
0.0010661292
-0.03217685
-0.023003513
-0.017989436
0.0116867535
-0.0071766363
-0.032610636
0.016917724
-0.024394184
0.0019185542
-0.00432512
0.008095246
0.013166736
-0.039500207
-0.02293972
-0.0058401874
0.017734267
0.008037833
0.03750989
0.010028154
0.033120975
0.008886271
-0.015692912
-0.011163657
-0.008599205
-0.015986357
-0.049222156
0.00056137244
0.0068385373
0.026307955
0.009843156
0.02501935
-0.0007651092
0.014468099
0.01146986
-0.009607124
-0.023781778
-0.014263963
-0.0042804647
-0.034371305
0.0042804647
0.0013117297
0.00847162
-0.0050395937
0.04488428
0.0016506264
-0.0058657043
-0.022212487
0.0044431356
-0.026027268
0.029778257
0.0010836722
0.003798833
0.004644081
0.005310711
0.015514293
-0.0035755597
0.005926307
0.011699513
0.011393309
-0.009288162
0.010206772
-0.016688071
0.029216884
-0.014468099
-0.0029456106
0.011680375
-0.034626473
-0.0011099864
-0.039985027
-0.02010734
-0.04712977
-0.0140470695
0.0039870203
-0.009505056
0.0011131761
-0.0075402525
-0.031181687
-0.0056296727
0.005585018
0.035545085
-0.012292781
0.017223928
-0.0010860643
-0.02975274
-0.026103819
0.027124496
0.0050714896
-0.018270122
0.0028563014
-0.0041018464
-0.002318851
-0.001669764
0.02367971
0.008127142
-0.017568406
-0.015641877
0.008414208
-0.0028690598
-0.0075593903
-0.003731851
-0.008879892
0.009817638
0.018308397
-0.024087982
-0.025529688
-0.031360306
-0.011150898
-0.02467487
0.00035424676
-0.022505932
-0.0026266489
-0.002983886
-0.014621201
0.010736248
-0.01878046
-0.01255433
0.007840076
-0.017058067
0.005827429
-0.0026984154
0.014608442
0.009505056
-0.018321155
0.010876591
-0.012260885
-0.012777602
0.027609318
-0.0015182573
0.0068768123
0.012752086
0.01254795
0.020094583
0.02211042
-0.0041847765
-0.0033172008
0.003856246
-0.018065985
0.007680596
-0.0030062133
-0.023973156
-0.0025469086
-0.0045324448
-0.0086055845
-0.017849091
-0.0031545304
0.018920803
-0.028094139
-0.012726569
0.020604922
0.0061272527
0.010500217
0.016930483
0.020885607
0.009817638
0.012790361
-0.008567309
-0.00017243862
-0.017721508
0.011297621
-0.022863168
-0.005833808
0.033937518
-0.025325553
0.025070384
-0.039985027
-0.01969907
-0.01795116
0.0042740856
0.0025963476
0.0007005195
-0.010697973
-0.0011203527
0.00523416
0.015667396
-0.002194456
-0.036693346
0.029063784
0.021829734
-0.02126836
0.025631756
-0.018129779
-0.012898808
0.018231846
0.0014696156
0.033223044
-0.03730575
0.0012495321
-0.03276374
0.025083141
-0.006388801
-0.02651209
-0.0031800473
-0.004809941
-0.008197314
0.020324234
-0.012752086
-0.0068193995
0.02559348
0.017938402
0.019737344
0.015999114
-0.00026972193
-0.0024974695
-0.0049247677
-0.016968759
-0.037050582
-0.025708307
-0.01703255
0.034728542
-0.009989878
-0.016853932
-0.011897269
0.016050149
-0.018665634
-0.0025660463
-0.007604045
0.029472053
0.01671359
0.011412446
0.0063122506
0.024049707
0.009919707
-0.009536953
-0.029523088
-0.012707431
-0.0015573301
-0.018601842
-0.0045005484
0.003929607
-0.024636596
0.013626041
0.010717111
-0.007993178
0.010066429
0.029191367
-0.007138361
-0.008745927
0.009607124
0.010028154
0.01638187
0.007189395
-0.01679014
-0.02732863
-0.011725029
0.01263088
0.030594798
-0.047818728
0.0072149117
0.00805697
-0.013600524
0.0029567743
-0.020987675
-0.004105036
0.013447422
-0.0066280225
0.018920803
-0.02394764
-0.018997354
-0.0015549379
-0.009798501
-0.03896435
-0.004203914
0.009977119
-0.026027268
0.013205011
-0.0055786385
-0.028527927
0.0068130204
0.0059199277
7.361036e-05
-0.020911124
-0.0008057768
0.0039615035
0.009128681
-0.0242666
0.010512975
0.020005273
-0.01911218
0.008962821
-0.002062087
0.006991639
-0.005336228
-0.012509675
0.007278704
-0.0072276704
0.0030349197
-0.013804659
-0.030237561
-0.027226564
-0.017504614
-0.015909806
-0.02218697
0.013447422
0.23373507
-0.020898364
0.00781456
0.009766605
-0.0036170247
0.009122303
-0.004586668
0.0018770891
-0.0140470695
0.0020573025
0.008446104
0.0049247677
-0.015731188
0.005243729
0.010302461
-0.017083585
-0.015118781
-0.014251205
-0.01038539
-0.025159692
0.0040795193
-0.0006299492
-0.01104883
-0.010978659
0.02542762
-0.02244214
-0.018895287
-0.002676088
0.017402546
0.004717442
-0.02093664
-0.0027685869
-0.0006064258
-0.033120975
-0.030237561
0.009039372
0.004695115
0.027634835
-0.005824239
0.005782774
0.04664495
-0.010142979
-0.02676726
-0.016343594
0.031692028
0.017900126
-0.0013484103
-0.012260885
-0.020069065
-0.0014161896
-0.023054546
-0.0021083364
0.009409368
0.037203684
0.018168055
-0.004229431
0.045190483
0.020809056
0.0053585554
0.0076997336
0.011642099
0.030237561
-0.002267817
-0.0074190474
-0.001795754
0.033682346
-0.04503738
0.014748786
0.006806641
-0.024470735
-0.0122226095
-0.027252082
0.007910248
0.0014137974
-0.018908044
-0.010755386
0.024713146
-0.007763526
0.011858993
0.0077507673
-0.012930704
-0.023730744
0.00905851
0.013460181
-0.017121859
-0.022467656
0.03164099
0.0037860745
0.008611964
0.0064525935
-0.009766605
-0.026945878
0.0008033846
-0.009951603
-0.005942255
0.019188732
0.004618564
-0.0033459074
-0.004912009
-0.012892429
0.000590079
-0.054963466
0.018129779
-0.005916738
0.018933563
0.016777381
0.0021705339
0.008210072
0.01513154
-0.02676726
-0.00028586935
-0.009505056
0.0056232936
-0.0065100067
0.026486574
-0.0061432007
0.011310379
0.0008859159
-0.009415747
0.0023842382
-0.0018818736
-0.011782442
0.0043984805
0.0064621624
-0.008458862
-0.031309273
0.0030173769
0.020796297
-0.0019121749
-0.018065985
0.017568406
-0.03148789
0.01146986
0.0055882074
0.008267486
0.014238447
0.012286401
-0.013881209
0.0006901532
0.008745927
0.008095246
0.02069423
0.00656423
0.016483936
-0.0022231624
-0.015259124
0.014149138
-0.018589083
0.0011913216
0.011112623
-0.047818728
-0.012586226
-0.0010278538
-0.020541128
0.031105136
0.013153978
-0.0026792777
-0.019877689
-9.937648e-05
0.038607113
-0.029956875
0.00017941592
0.010334357
-0.01611394
-0.0042645168
-0.005377693
-0.16167526
-0.01155279
0.014136379
-0.014748786
0.02209766
-0.008133521
0.026971394
0.013332596
-0.02817069
-0.019265281
0.0053489865
0.023756262
-0.0242666
-0.015386709
0.006806641
-0.0074509433
-0.004031675
-0.013256045
0.016815657
0.025185209
0.0029392312
-0.0013986467
0.0007076961
-0.00013256843
-0.011814338
0.004927957
-0.0071256026
0.02268455
-0.0014129999
-0.018014953
-0.021778699
-0.012369332
0.006296302
-0.0011067968
-0.008248348
0.01537395
-0.025504172
0.011323137
-0.0026250542
0.020183891
0.011195553
0.027303115
0.02601451
-0.0048673544
-0.0020301908
0.040546402
0.018920803
0.01679014
0.014442583
-0.023309715
-0.012184334
-0.006197424
0.013205011
0.0062197517
0.009619882
0.031972714
0.006672677
0.0054893293
-0.006749228
-0.0076486995
-0.019405626
-0.023564884
0.009396609
-0.032278918
0.009728329
0.004797183
0.0031098758
0.008541793
-0.03439682
0.021804217
-0.012075887
-0.022569723
0.019915964
-0.03567267
0.0008061755
0.006679056
-0.0467215
-0.0028148363
0.018078744
-0.008560929
-0.008886271
0.04297051
-0.0023985915
0.016879449
0.0029743172
0.007929386
0.011846235
-0.005527605
-0.00789749
0.018869769
0.0074062888
-0.015948081
-0.021204568
-0.03449889
0.014774302
0.038530562
0.01869115
-0.020043548
-0.009721951
-0.014404307
0.010117463
-0.007833698
-0.021204568
0.039500207
0.025772098
0.0006140011
0.001401039
0.00315772
0.029216884
0.021638356
0.01039177
0.009721951
0.0073488755
0.024279358
0.0081462795
0.025670031
0.0011945113
-0.01513154
0.023373507
-0.016432902
0.05777033
-0.007680596
-0.010768144
0.0018420033
-0.016764622
0.0034671128
-0.09711743
-0.037662987
-0.0009026614
0.0096326405
0.0027207427
0.022977995
0.003041299
0.025044866
-0.0036138352
0.025389345
-0.023781778
-0.032636154
-0.0012734543
0.008044212
0.01254795
-0.028987233
-0.009198853
-0.011488997
0.0012758465
0.022378348
-0.0051384717
-0.011495377
-0.0028610858
-0.0275838
0.0070171556
0.001811702
-0.034703024
0.026282437
0.006698194
-0.0072212913
-0.0079612825
-0.016828416
-0.004628133
0.0025118229
-0.029191367
-0.017007034
-0.013970519
-0.0069087087
0.020553887
-0.025721066
0.022263521
-0.008867133
0.010723489
-0.035621636
0.005227781
-0.0082228305
0.0074190474
0.02533831
-0.011170036
0.01064056
-0.025312794
0.0039902097
-0.028043106
0.00481951
0.03863263
-0.011865372
-0.008267486
-0.006972501
0.018869769
0.00067540124
0.014621201
0.007986799
0.0148125775
0.015437743
-0.0032055643
0.001819676
-0.008879892
0.008037833
-0.0017335564
-0.008216451
0.010787282
0.0023826433
-0.003581939
0.011016934
-0.030212045
-0.027150013
-0.015437743
-0.017147377
0.01962252
-0.017772542
-0.0033809931
-0.025376586
0.013677075
-0.0038434875
-0.001134706
0.01162934
0.0026952256
-0.017325995
-0.010040912
-0.016981516
-0.003923228
0.0066535394
0.001920149
-0.02824724
-0.01977562
0.005518036
-0.0014385169
-0.0010860643
0.020388028
-0.013243287
-0.021702148
-0.021727666
-0.048431132
0.012828636
-0.004886492
-0.010123841
-0.010729869
0.015284641
0.011750546
0.011935544
-0.021753183
-0.0058497563
-0.017759783
0.022072144
-0.016075665
0.0161267
-0.030237561
0.0013978493
0.003333149
-0.010149359
0.0075083566
-0.001180158
0.038530562
0.034703024
0.019431142
-0.006864054
-0.018065985
0.0024209188
0.00174472
0.0058401874
-0.00981126
-0.012063129
0.020464577
-0.044578075
-0.008701273
0.028221725
0.003814781
-0.02735415
0.0097857425
0.003798833
0.00697888
0.017568406
-0.003955124
-0.034779575
0.003747799
0.00523416
-0.019571485
0.025657272
-0.014302239
0.017989436
0.03582577
-0.014455341
0.0077571464
0.021472497
-0.008216451
0.0018675203
-0.016356353
-0.009957982
0.009696433
-0.0053553656
0.029216884
-0.040367782
0.026792776
0.024955558
0.03972986
-0.013868451
0.0145063745
0.03016101
-0.01994148
-0.007827318
-0.016777381
-0.026639674
-0.004806752
-0.019494934
-0.0033044424
0.01471051
0.0065450924
-0.0044558938
-0.0037414199
-0.009951603
-0.009651778
0.009396609
-0.00033909606
-0.025772098
-0.011661237
0.011131761
0.014901887
0.008439724
-0.0037159028
-0.00090186397
0.005715792
0.013345354
-0.028068623
0.0050810585
0.0028563014
-0.0021498012
-0.012956221
0.018423224
-0.016879449
-0.004838648
0.02235283
0.023641435
-0.0016362731
-0.0020652765
-0.019443901
-0.008484379
0.001296579
0.01280312
-0.020745264
-0.01421293
-0.0017463149
0.038785733
0.01870391
-0.01570567
-0.0009194069
0.0108893495
-0.016318077
0.0040731397
-0.01122107
-0.013345354
-0.041924316
0.011406068
0.014366032
0.0028036726
0.017249444
-0.0057732053
-7.9055135e-06
0.012949842
-0.0032151332
-0.0015836444
-0.011016934
-0.014787061
0.007680596
0.009383851
-0.024394184
0.0062484583
-0.010844695
0.0007080948
0.005100196
0.0056743273
-0.02842586
0.040750537
0.0006526752
-0.0036202143
0.028272757
0.0036138352
0.03107962
-0.011476239
-0.0024894956
-0.003897711
0.019597001
0.027711386
-0.013319837
0.007278704
0.005144851
-0.014761544
0.01579498
0.0067173317
0.02102595
-0.020158375
-0.0070299143
0.02468763
0.00014881552
0.022301797
-0.0079612825
-0.011080727
-0.010774524
0.033860967
0.017428063
0.011833476
-0.031947196
0.003058842
0.013728108
0.010921245
-0.0053394176
-0.0034862505
0.008930925
0.018716669
-0.0029408261
0.00963902
0.0044718417
-0.028272757
0.025733823
-0.017058067
-0.006305871
0.0056807064
0.01603739
0.0007531481
0.0019648036
-0.019839413</code></pre>
</div>
</div>
<div class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>text_array <span class="kw">=</span> <span class="kw">[]</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="dt">Dir</span><span class="at">.glob</span>(<span class="st">"training_data/*.txt"</span>) <span class="cf">do</span> <span class="kw">|</span>file<span class="kw">|</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  text <span class="kw">=</span> <span class="dt">File</span><span class="at">.read</span>(file)<span class="at">.dump</span>()</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  text_array <span class="kw">&lt;&lt;</span> text</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>embedding_array <span class="kw">=</span> <span class="kw">[]</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>text_array<span class="at">.each</span> <span class="cf">do</span> <span class="kw">|</span>text<span class="kw">|</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  response <span class="kw">=</span> client<span class="at">.embeddings</span>(</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="wa">parameters: </span><span class="kw">{</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>      <span class="wa">model: </span><span class="st">"text-embedding-ada-002"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>      <span class="wa">input: </span>text</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">}</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  embedding <span class="kw">=</span> response<span class="kw">[</span><span class="vs">'data'</span><span class="kw">][</span><span class="dv">0</span><span class="kw">][</span><span class="vs">'embedding'</span><span class="kw">]</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  embedding_hash <span class="kw">=</span> <span class="kw">{</span><span class="wa">embedding: </span>embedding, <span class="wa">text: </span>text<span class="kw">}</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  embedding_array <span class="kw">&lt;&lt;</span> embedding_hash</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="61">
<pre><code>["\"OpenAI is an AGI research and deployment company. Our mission is to ensure that artificial general intelligence benefits all of humanity.\"", "\"OpenAI\\u2019s large language models, including the models that power ChatGPT, are developed using three primary sources of information: (1) information that is publicly available on the internet, (2) information that we license from third parties, and (3) information that our users or our human trainers provide.\""]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span> <span class="vs">'csv'</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a><span class="cn">CSV</span><span class="at">.open</span>(<span class="st">"embeddings.csv"</span>, <span class="st">"w"</span>) <span class="cf">do</span> <span class="kw">|</span>csv<span class="kw">|</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  csv <span class="kw">&lt;&lt;</span> <span class="kw">[</span><span class="wa">:embedding</span>, <span class="wa">:text</span><span class="kw">]</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  embedding_array<span class="at">.each</span> <span class="cf">do</span> <span class="kw">|</span>obj<span class="kw">|</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    csv <span class="kw">&lt;&lt;</span> <span class="kw">[</span>obj<span class="kw">[</span><span class="wa">:embedding</span><span class="kw">]</span>, obj<span class="kw">[</span><span class="wa">:text</span><span class="kw">]]</span></span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="62">
<pre><code>[{:embedding=&gt;[-0.008899448, -0.027376896, -0.007327039, -0.015006402, 0.007451005, 0.012050793, -0.00983898, 0.026306875, -0.014092969, -0.011698469, 0.015071647, 0.016976807, 0.0062896395, -0.022209475, 0.0023684017, 0.009852029, 0.018568791, -0.013427467, 0.0036602572, 0.0073988084, -0.015254334, 0.010178255, -0.0129055055, -0.008977743, -0.013727595, 9.162367e-06, 0.016193865, -0.02637212, 0.0054381895, -0.018790625, 0.009029939, 0.0033764404, 0.0006161596, -0.00046283333, -0.0021857151, -0.0012861465, 0.0066745863, -0.006726783, 0.028577408, 0.0021025273, 0.018333908, 0.006759405, 0.004492134, -0.024806235, -0.020591393, 0.010752413, -0.030299881, 0.0066647995, -0.00071851304, 0.0034318988, -0.0124553135, 0.033457752, 0.0034384234, -0.0017567277, -0.012024695, 0.004368168, -0.039851785, 0.03251822, 0.010895953, 0.0042409394, 0.009675867, -0.014301754, -0.025210755, 0.0060025607, -0.013779791, 0.012514034, -0.001074915, 0.012885932, 0.005245716, -0.011228703, 0.02680274, 0.001848071, -0.009010365, -0.013492713, 0.022339964, 0.018790625, -0.003210065, -0.0073139896, -0.008357913, 0.01845135, 0.0011352669, -0.010615398, -0.0033356622, 0.010106485, 0.011776763, -0.020108579, 0.00120459, 0.0049390635, 0.0070986804, -0.012748917, 0.0027500861, -0.010054289, 0.019234292, 0.017381327, -0.03771174, 0.031082826, -0.012468362, 0.01340137, -0.01086333, -0.048438054, -0.009225675, -0.010785036, -0.0063222623, -0.00406804, -0.0082926685, -0.0029507154, 0.008436208, -0.011150409, 0.031056726, 0.010126059, 0.011594077, 0.017029004, -0.0105501525, -0.018921115, -0.013029471, -0.0030485832, 0.021061158, -0.0060743303, -0.019430028, -0.00020185241, 0.03152649, 0.017524868, -0.0013464984, 0.0059992983, 0.0035689138, 0.03439728, -0.020995913, -0.017720602, 0.0018562266, -0.020069432, 0.008070834, 0.012716294, 0.025419539, 0.01188768, -0.023122909, 0.020708835, -0.016833268, 0.0038984022, -0.0018399153, -0.012096465, 0.01278154, 0.00901689, -0.01845135, -0.006857273, -0.027585682, 0.018555742, 0.001129558, -0.0059797247, 0.02500197, 0.024153782, 0.012761966, -0.0055230083, -0.0232273, 0.013479663, 0.021752758, 0.0028120691, -0.008958169, 0.017851094, 0.00092321995, 0.011489684, 0.009571474, 0.012546657, -0.015998129, 0.0061134775, 0.013884184, 0.030978432, 0.02102201, -0.003608061, 0.0021514613, -0.022457406, 0.004795524, 0.045306284, -0.023579624, 0.014106018, 0.0047368035, 0.030404275, 0.01802073, 0.014340901, -0.015097745, 0.019743204, 0.004916228, -0.0021481991, 0.016402649, 0.012846785, 0.01762926, -0.0075358236, 0.009427935, 0.011098213, 0.017250838, -0.012044269, 0.015658854, -0.004570428, 0.023540476, 0.0061624115, -0.6668584, -0.033301163, -0.006625653, -0.015502266, 0.019821499, 0.021269944, 0.015789345, -0.027220307, 0.027794465, 0.029751822, -0.012442265, -0.010824183, -0.027533485, -0.013923331, 0.023162054, -0.019221243, -0.005607827, -0.028159838, -0.0008343233, 0.0047531147, -0.024649646, 0.010158681, -0.007144352, -0.008605845, -0.005134799, 0.012885932, 0.014849813, -0.007881623, -0.027585682, 0.0066778488, -0.0033536046, 0.017250838, 0.019782351, -0.022496553, 0.04619362, -0.0012967489, -0.015058598, 0.018542692, 0.0005235929, 0.027376896, -0.029621333, 0.0036569948, 0.007940344, -0.017864142, -0.0068898955, 0.023801457, 0.029177664, -0.013923331, -0.011646273, 0.00090853975, -0.0010985665, 0.012396593, -0.0011083533, -0.0060253963, -0.0067398315, -0.00031440041, 0.029021077, -0.008853777, 0.004475822, -0.02034346, -0.0024189667, 0.013042521, -0.042539887, -0.0059144795, -0.03113502, 0.009943373, 0.0014125591, 0.006915994, -0.005859021, -0.036276344, 0.026580904, 0.010882904, -0.0061885095, 0.0040549906, -0.003258999, 0.026607003, 0.019299537, 0.0003788301, -0.024493057, -0.0056404495, 0.017733652, -0.022209475, 0.029412547, -0.010243501, 0.02951694, 0.008521026, 0.0038005344, -0.00998252, 0.018490497, -0.006844224, 0.020526148, 0.010432712, -0.0034449478, -0.032727003, 0.005268552, -0.008808105, -0.018829772, -0.010145633, -0.0018774313, -0.012611902, -0.0009917275, -0.0026391693, 0.03116112, 0.016559238, 0.0026277513, 0.032022357, 0.0038005344, 0.0058133495, 0.027429093, -0.030012803, -0.01652009, -0.014771519, -0.0033193508, 0.0046389354, 0.013238256, -0.026724445, -0.014823715, -0.013049045, 0.01845135, -0.018751478, -0.010576251, -0.009558425, -0.007281367, -0.018973311, 0.014171263, 0.01461493, -0.0065538827, -0.024545254, -0.04060863, -0.0006394032, 0.02338389, -0.0069029448, -0.0021579857, -0.002187346, 0.048672937, 0.00040594762, 0.023305595, -0.014132116, 0.010843757, 0.013727595, -0.010648021, -0.0043975282, 0.03742466, 0.0016931136, -0.029882314, -0.011574503, 0.00064592774, -0.0071052047, -0.013584056, -0.007914246, -0.010922051, 0.008984268, -0.019730156, 0.029151566, -0.011228703, -0.02226167, -0.03116112, -0.02936035, 0.01338832, -0.01393638, 0.008279619, 0.0050467183, -0.0142104095, -0.020669688, -0.0088864, -0.007216122, -0.0002966619, 0.042148415, -0.03170918, -0.025419539, 0.019051606, -0.037241973, -0.0076728384, 0.020017235, 0.006234181, 0.025223805, -0.026711395, 0.0011882787, 0.008677615, -0.018216467, -0.009473607, -0.012722819, -0.0039147134, -0.0124031175, 0.009173479, -0.011209129, 0.02459745, 0.023944998, -0.0061297887, 0.0010080388, -0.017394377, 0.05355328, 0.00029523464, 0.030117195, -0.017824996, 0.010837232, 0.004449724, -0.004074564, 0.0068898955, 0.015267382, 0.019456126, 0.0011833853, 0.014719322, -0.0031138284, 0.007914246, -0.006942092, 0.0034873572, -0.01760316, 0.023670968, -0.0027027833, 0.018829772, 0.0047302786, 0.008149128, -0.016611435, 0.0072748424, 0.020460902, -0.023488281, 0.011665846, -0.026659198, 0.024636596, 0.02513246, 0.02361877, -0.0029914936, -0.00030420587, 0.0059014307, 0.0225357, 0.0067137335, 0.02459745, 0.0087950565, -0.024558302, 0.0009150643, 0.009382264, -0.0038527306, 0.013818938, 0.02364487, 0.0013571007, 0.01872538, -0.00996947, 0.0105893, -0.010145633, -0.0028202247, -0.003334031, 0.02595455, -0.026828837, 0.018803673, -0.005806825, 0.02294022, 0.00536642, -0.04974296, 0.0177728, -0.028499113, 0.0053794687, -0.0050401934, -0.0014647553, 0.010967722, -0.019860646, -0.007294416, -0.013792841, 0.003572176, 0.031239413, 0.0027663975, 0.017720602, 0.028733997, 0.002358615, -0.00956495, 0.00034478024, 0.019730156, 0.0059373155, 0.00039228692, -0.0051380615, -0.005855759, -0.008736336, 0.012944653, -0.024140732, 0.02829033, 0.026515659, -0.0098977005, 0.004935801, 0.009538852, 0.019612715, 0.0013204003, -0.03074355, 0.015515314, 0.015371775, 0.021530924, 0.004358381, -0.017929388, 0.011450537, -0.026254678, -0.010158681, -0.000761738, 0.01585459, -0.01435395, 0.021139452, 0.0034677838, 0.016467895, 0.021165552, -0.0091473805, 0.0011809386, -0.032753102, 0.005966676, 0.0041398094, 0.01996504, -0.01816427, 0.004909703, -0.00047139675, -0.013049045, -0.0039766966, -0.022379111, -0.035858776, 0.010895953, -0.007176975, 0.021961542, -0.0037255024, 0.0048281467, -0.005209831, -0.016963758, -0.022888025, -0.00075113564, 0.0029409286, -0.007907721, -0.018999409, -0.017798897, 0.009630195, 0.07417077, -0.0005957705, -0.018594889, 0.007255269, -0.020969816, 0.026032845, -0.018529644, -0.010178255, -0.0053011747, 0.008357913, -0.01627216, -0.0097998325, -0.0043224962, -0.031787474, 0.0036798306, 0.0057252683, -0.016611435, -0.010008617, 0.0008465568, -0.015463118, -0.00070220174, -0.0047987862, -0.0088864, -0.012142137, 0.012487936, -0.024427813, 0.015815442, 0.018138172, -0.029960606, -0.017289985, 0.0089973165, -0.008070834, 0.0029653956, -0.004916228, -0.037085384, 0.007483627, 0.008279619, 0.016624482, 0.0032068028, -0.0052750763, 0.01448444, 0.015750198, -0.020917619, -0.030143294, 0.017133396, -0.012129087, -0.007033435, 0.014523587, -0.01208994, -0.025080264, 0.002125363, -0.02528905, -0.04345332, 0.0022052885, 0.0053762067, 0.040974002, 0.00039391805, -0.006583243, 0.009369214, -0.0423572, -0.01318606, -0.01995199, -0.003934287, -0.0064397035, 0.0033764404, -0.03674611, 0.00659303, 0.0064364416, -0.005859021, 0.015945934, 0.026515659, -0.023279496, -0.04796829, -0.012070366, -0.00499126, -0.015671903, 0.0007576602, -0.010452285, -0.0038918776, 0.035284616, 0.009525803, -0.03254432, -0.012794589, -0.022092033, 0.0058035627, -0.02035651, -0.01911685, -0.020252118, -0.002171035, 0.016480943, 0.0074379556, 0.0027778153, 0.02090457, 0.0015944302, -0.0052489783, 0.010341368, 0.020695785, -0.012011646, -0.013701498, -0.007157401, -0.008690664, -0.014588832, -0.016141668, -0.0019785615, 0.016846318, 0.005232667, 0.018973311, 0.020695785, -0.0074640536, -0.012925079, 0.0051054386, -0.0067398315, 0.029490842, -0.016493993, 0.008821154, -0.0033405556, 0.024205979, 0.015593609, -0.0011866476, -0.02269229, -0.014680175, -0.00047914463, 0.007203073, 0.018007683, 0.008429683, 0.008736336, 0.017094249, -0.016585337, -0.03019549, 0.0036178478, -0.02364487, -0.004224628, -0.0072226464, 0.0009591048, 0.0052555026, -0.019025508, -0.012938128, -0.0040713022, -0.034188498, -0.031865768, -0.010909001, -0.0016376552, 0.017942436, 0.0052033067, 0.0069486164, -0.026346022, -0.009943373, 0.0029360352, 0.0022020263, 0.038755663, -0.025210755, 0.022353014, -0.018099025, -0.0012959333, -0.012474887, -0.021335188, -0.010080387, -0.0058459723, 0.018425252, 0.03384922, 0.026215531, -0.0054512387, 0.014262606, 0.016180815, 0.014288704, -0.0232273, 0.023918899, -0.003146451, -0.0034645214, -0.011032968, 0.004857507, -0.0003199055, 0.021113355, -0.013440516, 0.0020666425, 0.012690196, -0.011946401, -0.026163336, -0.016585337, -0.040243253, -0.0061395755, 0.020473951, 0.008188276, 0.026137237, -0.03210065, -0.01817732, 0.044627734, 0.012240004, 0.01406687, 4.3008328e-07, 0.029543038, 0.01161365, -0.014445293, 0.03390142, 0.003846206, 0.0046650334, -0.00021490146, -0.02403634, 0.015554462, 0.014823715, 0.021922395, 0.019625764, 0.008325291, -0.01351881, -0.012037744, 0.016507043, 0.0012298725, 0.0038820908, 0.0053142235, -0.01996504, 0.0059895115, -0.023396937, 0.0039245, -0.015919834, 0.00070913404, 0.0018872181, -0.0058231363, 0.020969816, -0.002384713, -0.028525213, 0.017851094, -0.010576251, 0.040660825, -0.006208083, 0.035832677, 0.015945934, 0.009656293, -0.027350798, 0.016376551, 0.008697188, 0.0031872292, 0.009317018, 0.0035069308, -0.0038918776, -0.0029001501, -0.0018284974, 0.00043673522, -0.014432244, -0.031317707, 0.01610252, 0.00033805182, -7.7733566e-05, -0.012964226, -0.022379111, -0.013094717, 0.019573567, -0.0017453098, -0.0031448198, 0.017407427, -0.0063614096, 0.006257017, -0.0020046595, 0.008279619, 0.02376231, 0.02364487, 0.0072617936, -0.019612715, -0.00083350774, -0.00079313724, -0.005320748, -0.008403585, 0.004860769, -0.0016482575, 0.01556751, 0.00074950454, 0.017838044, 0.0014215304, -0.0009860185, -0.00921915, 0.024401713, -0.033405554, -0.009186528, -0.018138172, -0.009212626, 0.021296041, -0.021478727, -0.010178255, 0.009121282, -0.026933229, -0.0004885236, 0.019651862, 0.0059471023, -0.015371775, 0.0008045552, 0.013831988, -0.027220307, 0.0013538384, -0.02404939, 0.020839324, 0.00029829302, -0.0011034599, 0.009571474, -0.02662005, -0.018660134, 0.035128027, -0.012285676, 0.0057709403, 0.039564703, -0.020734932, 0.00078661274, -0.0218702, 0.0067137335, -0.019704059, 0.018777575, -0.0061526247, -0.00642013, 0.023814507, -0.008481879, 0.0005855759, -0.021348238, 0.0006369565, 0.028916683, -0.0010577881, 0.008625419, -0.017381327, -0.017459622, -0.0010267968, 0.0065375715, -0.0065897675, 0.017303033, 0.0050238823, -0.007627167, 0.029569136, -0.007894672, 0.025197705, 0.0035656516, 0.032622613, 0.003970172, -0.023879752, -0.04467993, 0.008370962, -0.007509725, -0.0035069308, -0.010119534, -0.0062961644, -0.010256549, -0.025302099, -0.012872883, 0.0012845154, -0.010967722, -0.009284396, 0.008188276, 0.007529299, -0.014941157, 0.0130033735, -0.0030371652, -0.0020731671, 0.0021074207, -0.02813374, -0.0025184657, -0.0087428605, 0.04042594, 0.007000813, -0.029203763, -0.033666536, 0.00167354, -0.0423572, 0.01351881, -0.0046650334, 0.029699625, 0.015828492, 0.017916339, 0.019495273, 0.02034346, 0.009460557, -0.0012567862, 0.014262606, 0.0066354396, -0.0051739463, -0.019756254, -0.015476167, -0.0019524633, -0.010276123, 0.005232667, 0.008605845, -0.014627979, -0.02719421, 0.031082826, 0.0068898955, -0.011385292, 0.005242454, 0.015998129, 0.0036439458, 0.0067855036, 0.020473951, -0.029412547, -0.013701498, 0.01031527, -0.025628325, 0.004557379, -0.011248277, 0.004218104, 0.004583477, 0.019312587, -0.0066289147, 0.007209597, -7.8804e-05, 0.013988576, 0.027350798, 0.00077274814, -0.0031154596, 0.008429683, 0.0016221594, -0.008325291, -0.002696259, 0.0047400654, -0.008625419, -0.008005589, 0.021061158, -0.01667668, 0.013923331, -0.016976807, 0.0045736902, -0.02295327, 0.0002966619, -0.005885119, 0.014380047, -0.025641372, 0.0033177198, -0.0041659074, -0.0018382842, -0.002371664, -0.013740644, 0.0028169625, -0.020069432, -0.023971096, -0.013062094, -0.012050793, -0.0067528808, 0.018007683, -0.011476635, -0.021165552, -0.0024988921, 0.030299881, -0.02254875, 0.010882904, 0.20815836, -0.025367344, -0.017838044, 0.0049488503, -0.03836419, -0.0028871011, 0.023684017, -0.00867109, -0.014262606, 0.007457529, -0.0029131994, 0.012520558, 0.00034457634, -0.007026911, -0.0020796915, -0.036980994, -0.035493404, -0.019351734, 0.0016996381, -0.013988576, 0.028916683, -0.00040064644, -0.015828492, -0.017094249, 0.0043388074, 0.008220898, -0.01243574, -0.007150877, 0.014732372, 0.012448789, -0.015606658, 0.01073284, 0.023514379, -0.006456015, 0.0044464623, -0.017407427, 0.01761621, 0.0016865891, 0.032622613, -0.005134799, 0.030691354, 0.027637877, -0.009715014, -0.006058019, 0.010843757, 0.036693916, -0.013466614, -0.017276935, -0.0038853532, 0.024232076, -0.033301163, -0.009427935, 0.0019263653, 0.036563423, -0.024245126, 0.008625419, 0.005506697, 0.002084585, 0.014654078, 0.012592329, 0.0035101932, 0.022822779, 0.01031527, 0.024519155, -0.022587897, 0.027142014, -0.030639157, 0.016141668, 0.011280899, 0.007633691, -0.00013100018, -0.020852374, -0.02036956, -0.017276935, -0.019743204, -0.015450069, 0.039851785, 0.036824405, 0.004668296, 0.00096318265, 0.009264822, -0.0074966764, -0.026607003, 0.016206915, -0.03625025, -0.028890586, 0.0066778488, 0.00074379554, -0.023305595, -0.013571007, 0.011169982, -0.0047139674, 0.0070725824, -0.010308745, -0.010974247, 0.014627979, 0.03254432, 0.0007107652, -0.0029523463, 0.0036765684, -0.008155653, 0.053344496, 0.014862862, 0.023553526, -0.011665846, 0.03403191, -0.023031564, 0.024819283, 0.008214374, -0.012416166, -0.02485843, -0.029986706, 0.005320748, -0.00963672, 0.0016401018, -0.007829427, -0.006367934, -0.007594544, 0.03225724, -0.0035819628, -0.02404939, -0.009793309, -0.011287424, 0.016233012, -0.0019426766, -0.031213315, -0.021491777, 0.0052033067, -0.022092033, -0.0037874852, 0.010093437, -0.02254875, -0.019012459, 0.01181591, -0.0035428158, 0.0034514724, 0.008736336, 0.024284273, -0.016702777, 0.0024923675, -0.010726315, 0.0064788507, 0.0059014307, -0.020317363, 0.009812882, -0.011678895, 0.037111484, 0.0066387015, -0.012527083, -0.011293949, -0.031787474, -0.012585804, -0.009343117, -0.0057285307, 0.04293136, 0.025210755, -0.004550854, -0.0005558078, 0.002446696, 0.019625764, -0.04180914, -0.0002793311, 0.012664098, 0.012298725, -0.018999409, -0.008299192, -0.16577506, 0.0033568668, 0.020447854, -0.02936035, 0.035989266, 0.0067398315, 0.024754038, -0.0067855036, -0.008723287, 0.009166954, 0.02280973, 0.00017656988, -0.011926827, -0.0018823247, 0.025302099, 0.012063842, -0.0058753323, 0.03703319, 0.019208195, -0.011992073, 0.012507509, -0.014667126, -0.0063124755, -0.012638, 0.022222523, -0.0025135723, -0.00963672, 0.017981583, -0.015985081, -0.009956421, -0.0010276122, -0.01133962, 0.041078392, 0.027089817, 0.014915058, -0.002133519, 0.018647086, -0.014745421, -0.029021077, 0.0013057201, 0.016768023, 0.03891225, 0.020969816, -0.002947453, -0.011450537, 0.00013426245, 0.012207381, -0.007692412, -0.0011148778, -0.022052886, 0.022013739, -0.030117195, 0.011522307, 0.0043975282, 0.008775483, 0.0170812, 0.014445293, -0.0038755664, -0.0051543727, -0.023971096, -0.013159961, -0.011848533, 0.02309681, -0.029490842, 0.010798085, -0.0072617936, -0.017381327, 0.018634036, -0.02146568, 0.025367344, -0.0039962702, 0.0077641816, 0.009989044, -0.0031317708, -0.01735523, 0.0138580855, -0.016350454, 0.021935444, 0.008246996, -0.012422691, 0.0024564827, 0.00057578913, -0.01530653, 0.0053240103, -0.011620174, -0.012311774, 0.012742393, -0.00249563, -0.02171361, -0.021491777, 0.011646273, -0.005832923, -0.027898857, 0.00021714426, -0.004019106, 0.013779791, 0.018216467, 0.0065995543, -0.007555397, -0.01558056, 0.0035297666, -0.0019426766, 0.016233012, -0.0052783387, 0.022927172, 0.01073284, -0.0127554415, -0.008990792, -0.0017893503, -0.013610153, -0.02143958, -0.012174759, -0.0026701607, 0.024232076, -0.014915058, 0.016493993, -0.0131534375, -0.018921115, 0.01869928, 0.009793309, 0.041078392, 0.0030926235, -0.014706274, 0.017472671, -0.013753694, -0.02337084, -0.10355722, -0.018333908, -0.004531281, 0.009303969, -0.011855057, 0.0232273, 0.0012649418, 0.03523242, -0.034318987, 0.0072617936, -0.017916339, -0.03358824, -0.02938645, -0.014366998, 0.0058231363, -0.022444358, -0.026032845, -0.029438645, -0.023240348, 0.003908189, 0.00833834, 0.00566981, 0.035963167, -0.007953393, 0.0027272503, 0.01236397, -0.041313276, 0.011293949, 0.009480131, 0.0041887434, 0.0043224962, -0.025797961, 0.0058459723, -0.030430373, -0.0073727104, -0.0070138616, -0.00047058117, -0.025158558, 0.012794589, -0.012748917, -0.0016539665, 0.016507043, 0.027924957, -0.014406146, -0.0095453765, -0.006240706, 0.020682735, 0.007966442, -0.006335311, -0.03306628, -0.03812931, -0.0069616656, -0.031265512, 0.007203073, 0.008788532, 0.014406146, 0.029673528, 0.0057252683, 0.0051772087, -0.008149128, -0.008919022, -0.004459511, -0.040321548, -0.001266573, 0.0028251181, 0.0066615376, -0.015254334, -0.0046226243, 0.008932071, -0.0138058895, 0.020956766, 0.01338832, 0.00047343565, 0.02446696, -0.011828959, -0.010191304, 0.0017567277, -0.027924957, 0.010471859, -0.008377487, -0.030560864, -0.020839324, -0.0075488724, -0.0129838, 0.0133035015, -0.007542348, -0.025654422, -0.0067137335, 0.014471391, -0.014471391, -0.017798897, 0.017107299, -0.011868106, -0.022874976, -0.018973311, -0.017055102, 0.009486656, -0.02213118, -0.010439236, 0.0135579575, -0.003784223, -0.0035982742, -0.04661119, 0.018686233, -0.011365718, -0.004792262, -0.012709769, -0.025445638, 0.0127032455, -0.0066126036, 0.0016719089, 0.02021297, -0.02350133, 0.0069290427, 0.0056893835, 0.016363502, -0.007940344, -0.007842476, 0.03210065, 0.0052750763, 0.005660023, 0.00519352, -0.0012339503, 0.009715014, 0.029830117, 0.0035558648, -0.0024499581, 0.02350133, -0.034371186, 0.030691354, 0.009121282, -0.006230919, 0.009258297, -0.015985081, -0.014523587, 0.010008617, -0.014641029, 0.002224862, 0.009173479, 0.028029349, 0.009591048, 0.0314221, -0.03839029, -0.02446696, 0.019560518, -0.009375739, -0.02294022, 0.0047270167, 0.0006540834, -0.00839706, 0.02977792, 0.033536047, 0.0013562851, 0.027402995, -0.060025606, -0.026750542, -0.007907721, 0.0020079217, 0.026006747, 0.012742393, 0.006883371, 0.018242564, 0.036511227, -0.004032155, 0.00060392614, -0.0029947557, 0.01556751, 0.02582406, -0.012846785, 0.017681455, 0.01079156, 0.0050238823, -0.026176384, -0.010537104, 0.0016466264, -0.01331655, 0.020878471, 0.002071536, 0.00539578, -0.0020323887, -0.018294761, 0.014719322, 0.0129838, -0.020695785, -0.011783288, 0.0033389244, 0.015345677, 0.02855131, -0.012827211, -0.0010806241, -0.005359895, -0.019012459, -0.023162054, 0.015737148, -0.00021204699, 0.023905851, 0.00676593, -0.0049749482, 0.018203417, 0.0025918665, 0.035702188, 0.026907131, 0.026398217, -0.0039897454, -0.006243968, -0.013375271, -0.031213315, -0.014275655, -0.011731091, -0.02635907, 0.004518232, 0.027142014, 0.02922986, 0.0273247, 0.015645806, 0.013022947, -0.015189088, 0.020434804, 0.016702777, -0.016363502, -0.044471145, 0.007940344, 0.014823715, 0.0070791068, 0.012540132, -0.017851094, 0.030560864, 0.014797617, 0.017250838, -0.0225357, 0.002334148, 0.0041137114, -0.008710237, -0.012729343, -0.00078008824, 0.0013831988, -0.014797617, -0.01556751, -0.014171263, 0.008951644, -0.035728283, 0.061017334, 0.029673528, -0.0043224962, 0.0058133495, 0.00093953125, -0.016063374, 0.005369682, 0.01406687, -0.028760094, -0.009206101, -0.015228235, -0.006142838, 0.004935801, -0.008155653, -0.0034286366, -0.005660023, 0.0017632522, 0.03538901, -0.01071979, -0.012638, 0.038807858, 0.035623893, 0.011502733, 0.0017029004, -0.03304018, -0.009741112, 0.016715826, -0.0029425595, 0.0050369315, -0.032022357, 0.024819283, -0.0066615376, -0.024675744, -0.014836764, -0.006084117, 0.005660023, -0.00232273, -0.011633224, 0.028029349, 0.005966676, -0.011855057, 0.027637877, -0.02172666, -0.03993008, -0.0130555695, 0.02104811, -0.04222671, 0.00016545781, -0.022353014], :text=&gt;"\"OpenAI is an AGI research and deployment company. Our mission is to ensure that artificial general intelligence benefits all of humanity.\""}, {:embedding=&gt;[0.005546885, 0.0035682102, 0.005672201, -0.033743, 0.002437068, 0.009174456, 0.0023694632, 0.017003413, -0.009807631, -0.04579973, 0.015235797, 0.04268661, -0.013197761, -0.007993846, -2.4282566e-05, 0.019549306, 0.013600091, 0.0020314394, 0.010388043, -0.021264158, 0.016990222, 0.006499947, -0.021686276, -0.017069368, 0.007894913, 0.01036166, 0.013929871, -0.033004295, -0.02138288, -0.014813679, 0.0075519425, 0.005266573, -0.018757837, -0.0073936484, -0.02151479, 0.010421021, 0.0043332977, -0.0029498744, 0.011858858, 0.0028987587, 0.024390465, 0.020459497, 0.010295705, -0.009491043, -0.003937563, 0.00831703, 0.0064372886, -0.004422338, -0.014233268, 0.016897883, 0.0033192271, 0.0359855, -0.0024568546, -0.0039144782, -0.017280428, -0.0002102342, -0.018494014, 0.017385956, 0.021897335, 0.0033686939, 0.0097878445, -0.0023727608, -0.013177974, 0.01982632, -0.0061305943, 0.008983184, -0.007400244, -0.0024321212, 0.011634608, -0.0128152175, 0.01923272, -0.00951083, 0.006358142, -0.004676268, 0.023401128, 0.012340335, -0.0078289565, -0.00945147, -0.024575142, 0.011238873, 0.005134661, -0.01267671, -0.014971972, 0.023335172, 0.0085940445, -0.024284936, 0.021884143, -0.002829505, 0.0071825897, 0.0020660663, 0.015974501, -0.012030343, 0.015671104, 0.0018764433, -0.03767397, 0.011680777, -0.021527981, 0.018085089, -0.018032324, -0.029548211, -0.009504234, 0.001019842, -0.03759482, -0.011225682, -0.024271745, 0.014971972, 0.028044418, -0.010803564, 0.009622956, 4.068135e-05, -0.006021767, 0.028756741, 0.00483786, -0.021475218, -0.019113999, 0.016277898, 0.019681219, -0.010038477, -0.023097731, -0.004079368, 0.012564586, -0.0049203048, -0.00080878334, 0.021198204, 0.017597014, 0.020195674, -0.029258005, -0.017293617, -0.012538203, -0.0031972087, -0.0011138291, 0.01245246, 0.011918218, -0.00027907558, -0.04289767, 0.031210298, -0.014866443, 0.0015615042, 0.0018995279, -0.010585911, 0.0023134006, 0.011482909, -0.0105001675, 0.0053819953, -0.008567662, 0.041209202, -0.0030141813, 0.0097878445, 0.023836436, 0.019852703, 0.023744099, -0.01630428, -0.016713208, 0.015473237, 0.012828409, -0.009589978, 0.01024294, 0.0280708, 0.005322635, -0.015882164, 0.0067274943, 0.018612735, 0.0007997144, -0.008297243, 0.02444323, 0.02727933, 0.026316375, 0.0038979894, -0.012043534, -0.009345941, -0.023295598, 0.02999671, -0.015143458, -0.009464662, -0.004346489, 0.015262178, 0.033400033, -0.0060514472, -0.028492918, -0.011219086, 0.0078817215, 0.009141478, 0.0037232065, -0.009570191, -0.00040727723, -0.026052551, 0.003670442, -0.02511598, 0.015565575, -0.026923168, 0.025762346, 0.0002772206, 0.020103335, -0.031421356, -0.6644126, -0.038201615, 0.008917228, -0.037726734, 0.01663406, 0.01639662, 0.0071364203, -0.016093222, -0.007908104, 0.049598783, -0.00724195, 0.003683633, 0.0006929484, -0.0141145475, 0.015090694, -0.017636588, 0.010599102, -0.029891182, 0.02411345, 0.011449932, -0.024852157, 0.0016423002, -0.0021765423, -0.0069847223, -0.024430038, 0.020406732, -0.01097505, -0.015855782, 0.011245469, 0.014417944, -0.011865454, -0.0050060474, 0.026989125, -0.018494014, 0.039626263, -0.0073936484, -0.0219501, 0.023018584, -0.0025392994, 0.024825774, -0.032846004, -0.0141145475, 0.0071034427, 0.02625042, -0.0093063675, 0.023664951, 0.020446306, -0.000988513, -0.025524905, -0.007367266, -0.0038584159, -0.020301204, 0.015288561, -0.018309338, 0.0064142044, 0.008844676, 0.022477746, -0.01561834, 0.0011336157, -0.01890294, 0.013877106, 0.019193146, -0.03144774, -0.01823019, -0.01573706, 0.0064966492, 0.010394638, 0.011812689, -0.013758386, -0.028361006, 0.01697703, 0.015473237, -0.0020611195, -0.0025937129, -0.029521829, 0.013441797, 0.017874029, -0.004471805, -0.030418828, 0.010473785, 0.005467738, -0.010170389, 0.001549962, -0.015816208, 0.021264158, 0.020960761, 0.0070111044, -0.0070111044, 0.014549855, -0.00079311884, -0.002829505, 0.030920092, -0.012445864, -0.023361554, -0.016911075, 0.0026992422, -0.019404205, -0.026197655, -0.001437837, -0.02035397, 0.003541828, -0.027675066, 0.04266023, 0.012162254, 0.035932735, 0.02014291, -0.019061234, 0.0119775785, 0.0057645394, -0.016040457, -0.008969992, 0.02196329, -0.009834014, -0.0017758607, 0.022306262, -0.021791805, 0.0012218317, -0.0019011768, 0.010849734, -0.016357046, 0.0037166108, -0.0064306934, 0.0053556133, -0.016014075, 0.023348363, 0.021870952, 0.014127738, -0.015156649, 0.003937563, 0.025670009, 0.0023645165, -0.012188637, 0.007776192, -0.019602071, 0.035537, 0.007967464, 0.041235585, -0.006879193, 0.0025838194, -0.0019209635, -0.029442681, 0.0056853923, 0.00053960114, 0.0010544688, -0.03711994, -0.01222821, -0.0002757778, -0.005787624, -0.0023414318, -0.014286032, 0.011865454, -0.0144839, -0.00030236624, 0.023691334, -0.007479391, -0.015565575, -0.011278447, -0.034560855, 0.011291638, -0.010170389, 0.0051775323, 0.017781692, -0.00848192, -0.00011078518, -9.733637e-05, -0.008204905, 0.005708477, 0.022886673, -0.03268771, -0.017029794, 0.021013526, -0.028888652, 0.0073145013, 0.034903824, -0.006559307, 0.022029247, -0.006308675, 0.001493075, 0.013890297, -0.03010224, -0.00083145563, 0.008528088, 0.0026992422, -0.008686382, 0.012149064, 0.0147213405, 0.03281962, 0.038861174, -0.030366063, -0.0029317366, -0.018533587, 0.026553817, -0.006605476, 0.03392768, 0.0091810515, -0.005593054, 0.019166764, -0.003080137, 0.0019737282, 0.013837533, 0.016264707, 0.044506993, 0.006262506, -0.028229095, -0.0036605485, -0.033690237, 0.011383976, -0.032160062, 0.012808622, 0.0015153352, 0.007835552, 0.004679566, -0.012663519, -0.0010948668, 0.010803564, 0.03078818, -0.003874905, 0.01369243, -0.012412887, 0.025524905, 0.008640214, 0.0023579209, 0.03134221, 0.0015977799, -0.011779711, 0.022306262, -0.02251732, 0.027200183, 0.0020825553, -0.028229095, 0.02354623, 0.0010388043, -0.0020198973, 0.015512811, 0.01652853, -0.009847205, 0.019272292, -0.021026717, 0.020657366, -0.00546444, -0.014220077, -0.0056656054, 0.010757395, -0.03326812, 0.042633846, -0.02229307, 0.014497091, -0.015314943, -0.043768287, -0.0054908227, -0.030840944, 0.011674182, -0.016700016, -0.005157746, 0.023915583, -0.0060250647, 0.021739041, -0.008462133, -0.013969445, 0.015855782, -0.009589978, 0.009286581, 0.021475218, 0.0043563824, 0.00815214, -0.004283831, -0.007835552, -0.003050457, -0.0126371365, -0.00090524374, -0.010282514, 0.0084687285, 0.012802026, -0.02636914, 0.029442681, 0.019945042, -0.009834014, -0.0030718928, 0.016172368, 0.04411126, -0.007855339, -0.026501052, 0.0076376847, 0.022662422, -0.00945147, -0.000116865485, -0.021659894, 0.00831703, -0.021303732, -0.0024222278, -0.011628012, 0.0022095202, -0.0054182713, 0.016554913, -0.0019984616, 0.0017907007, 0.0007692098, -0.017385956, -0.008363199, -0.01629109, -0.0068396195, 0.005550183, -0.01766297, -0.0013966147, 0.0298648, -0.007815765, -0.032872386, 0.006354844, -0.010895902, -0.0271738, 0.011364189, 0.015789825, -0.00074365194, -0.033215355, 0.011535674, 0.005527098, -0.004287129, -0.005939322, 0.0014196992, 0.0029762567, -0.0018220297, -0.027886124, -0.014048591, 0.0026926466, 0.0477784, 0.016159179, -0.013652856, 0.0032038044, -0.017583823, 0.0008442346, -0.003587997, -0.005787624, -0.013837533, 0.025933832, -0.011779711, -0.0036803351, 0.010533146, -0.0031526885, 0.003495659, 0.00021662367, -0.0070572738, -0.019377822, -0.027200183, -0.024403656, 0.016515339, -0.010671653, 0.0039078826, 0.0038386292, 0.02093438, -0.010005499, 0.025828302, 0.025551287, -0.0192591, -0.012821813, 0.011054196, -0.0028163139, -0.00461361, 0.0027767404, -0.020736512, 0.029389916, -0.0030784882, 0.0047488194, 0.014022209, 0.019206338, 0.0026003085, 0.0073936484, -0.0063812262, -0.024284936, -0.0063449508, -0.03181709, 0.004933496, 0.023440702, -0.00730131, -0.037647586, -0.00084176124, 0.011720351, -0.03609103, 0.0035781036, 0.014813679, 0.0010874467, 0.005790922, -0.011482909, 0.0035187434, -0.039441586, -0.001708256, -0.026632963, 0.0007168574, -0.0069187665, -0.009260198, -0.003068595, 0.0074200304, 0.0022853694, -0.02638233, 0.017122133, 0.013850723, -0.032555796, -0.060151715, -0.015024737, 0.010757395, 0.003713313, 0.01890294, 0.0106254835, -0.018586352, 0.026830832, -0.0073276926, -0.026118508, -0.0018929322, -0.019997807, 0.00056268566, 0.0063779284, -0.028545681, -0.012208424, 0.013850723, 0.010955263, -0.0010008797, -0.010533146, -0.0140354, -0.003253271, 0.006997913, 0.018124662, 0.028361006, 0.00871936, 0.009187647, -0.011918218, -0.009761463, -0.024073876, -0.020169292, -0.018217, 0.003352205, 0.010902498, 0.019443778, 0.009220624, 0.00803342, -0.006997913, 0.014404753, 0.0012597563, 0.010770586, -0.015446855, 0.001264703, -0.021435644, 0.032107297, -0.001708256, -0.0053391242, -0.025392994, -0.008633618, -0.04015391, 0.02127735, 0.022240305, -0.008587449, 0.0019654837, 0.005642521, 0.007591516, -0.038069703, 0.0063482486, -0.0067604724, 0.023717716, -0.009814227, -0.0070111044, -0.0026151487, -0.019668028, -0.023097731, 0.009339346, -0.024298128, 0.00295647, -0.00043901848, -0.013705621, 0.0063350573, 0.010223153, 0.019219529, -0.020802468, -0.008020229, 0.0035187434, 0.04015391, 0.039072234, -0.008211501, 0.021527981, -0.021211395, -0.017188089, -0.0008322801, -0.014840061, 0.0007865232, 0.022992201, 0.039230525, 0.026593389, 0.032766856, -0.017399147, 0.016159179, 0.031500503, -0.0055238004, 0.0033258225, -0.0001697332, 0.015222605, -0.0047488194, -0.031737946, 0.0025195125, 0.010269322, 0.027305713, -0.007987251, 0.008930419, 0.012465651, -0.009214029, -0.0045740367, -0.008185118, -0.013837533, -0.016264707, 0.023031775, -0.0053556133, 0.027965272, -0.028809506, 0.005075301, 0.014272841, -0.0059261313, 0.0044025513, 0.00904914, 0.023902392, -0.014312414, -0.01596131, 0.017016603, 0.0030587015, -0.017016603, -0.0026118509, -0.0430032, 0.013454989, 0.0056359256, 0.01199077, 0.0140617825, 0.009352536, -0.011159726, 0.011819284, 0.011397167, -0.010111028, 0.005075301, -0.014549855, -0.017623397, -0.021356497, -0.020090146, -0.012465651, 0.0052500837, -0.016607678, 0.008752339, 0.001131967, 0.026698919, -0.012406291, -0.015948119, 0.044981875, 0.0035484235, 0.06247336, 0.009405301, 0.012221615, -0.0009151371, 0.031289443, -0.004442125, 0.009378918, -0.0005734035, 0.008818294, 0.0056787967, -0.00092255714, -0.0040101144, -0.0072485455, 0.027068272, 0.032977913, -0.0125118205, -0.027701447, 0.026210846, 0.015341326, 0.014787297, -0.018243382, -0.027595919, -0.02332198, 0.0010825, 0.0035352323, 0.014919208, -3.3828124e-05, -0.010994837, 0.0023958455, 0.028440153, 0.02738486, 0.007446413, 0.014523474, 0.017610205, 0.0018236786, 0.0023414318, -0.0015128618, -0.0054149735, -0.0067110057, -0.0042574485, 0.0027107846, 0.0024634502, -0.003855118, 0.017623397, -0.0072287587, 0.012261189, 0.0047026505, 0.029521829, -0.030392446, 0.0012276028, -0.014681768, -0.007571729, 0.020670556, -0.020222057, 0.006483458, 0.0099659255, -0.02468067, 0.010599102, 0.034587234, 0.01697703, -0.029970327, 0.0033406627, 0.00267286, -0.021105865, -0.011252064, -0.0026167976, 0.007730023, -0.033663854, -0.009774653, 0.010579315, -0.009425088, 0.00053506665, 0.0015639776, -0.026883595, 0.010315492, 0.046089932, -0.01743872, 0.0106056975, -0.0057216682, 0.013626474, -0.03350556, 0.009550404, 0.0035846992, -0.019100808, 0.017372765, -0.012729474, -0.013613283, -0.010665057, 0.0073276926, 0.01618556, 0.010638675, 0.020736512, 0.017016603, -0.0026992422, 0.009134882, 0.00215016, 0.0238892, 0.018019132, 0.00089370145, -0.027002316, 0.02534023, -0.00670441, 0.014417944, -0.010223153, 0.02342751, -0.0014328903, -0.034270648, -0.024390465, 0.017636588, -0.0030784882, 0.0084159635, -0.015671104, -0.0065988805, 0.0007288119, -0.02398154, 0.013039467, -0.006707708, -0.0065362225, 0.0011402114, 0.025947023, 0.0094844485, -0.0052302973, -0.021343306, 0.0051775323, -0.013257122, -0.004379467, -0.030972857, 0.013177974, -0.0054182713, 0.039758172, 0.008956801, -0.041578554, -0.042739376, -0.009814227, -0.039256908, 0.011463122, -0.00095388613, 0.024126641, 0.013903488, 0.0215016, 0.0064966492, 0.01753106, -0.005075301, 0.002641531, 0.00082939456, 0.009068926, -0.0005457845, -0.009728485, -0.022873482, 0.02557767, -0.0039012872, -0.00062122144, -0.00053341774, -0.02148841, -0.012445864, 0.00034523752, -0.008534684, -0.019681219, 0.0035682102, 0.01640981, 0.00489722, -0.004412445, 0.03020777, -0.02999671, -0.016027266, 0.013995826, -0.0064372886, -0.017544251, -0.0107310135, 0.001169067, 0.020776086, 0.00059401465, -0.00594262, -0.0008030122, -0.009741676, 0.007459604, 0.03577444, 0.005342422, -0.0016282845, 0.014444326, 0.00020394778, -0.0057843262, 0.002733869, 0.011733542, 0.002021546, 0.01561834, 0.031526886, -0.026540626, 0.0024618013, -0.01845444, -0.0044652093, -0.04231726, -0.0124590555, -0.0015623287, 0.004752117, -0.034244265, 0.012360122, 0.011535674, 0.001288612, 0.0056689032, -0.013758386, 0.020380352, -0.024311319, -0.012208424, -0.019865895, -0.023480274, 0.0078025744, 0.01799275, -0.013943062, -0.017689353, 0.019325057, 0.03192262, -0.041947905, 0.01142355, 0.19132467, -0.031869855, 0.0026563709, 0.020406732, 0.0029746077, -0.0006170992, 0.013006489, 0.009095308, -0.007670663, 0.00045179742, -0.011469718, 0.011383976, -0.010440808, -0.004425636, -0.00071809406, -0.026909977, -0.041130055, -0.039362438, -0.0028031226, 0.0051280656, -0.010942072, -0.0076113027, -0.0075189644, -0.020736512, -0.004758713, 0.011951196, -0.008396177, -0.0010165442, 0.008264265, 0.015341326, 0.0013694079, 0.010348469, -0.008132353, 0.018494014, -0.008805103, -0.02308454, 0.0045311656, 0.0041815997, 0.0243377, 0.0019242612, 0.033901297, 0.006321866, 0.0020165995, -0.022781143, 0.007162803, 0.016647251, -0.012353526, -0.015750252, 0.013784768, 0.011489505, -0.02093438, -0.0147741055, 0.013520945, 0.033004295, -0.019206338, 0.022490937, -0.01160163, 0.00014695783, -0.0008648458, 0.0013042765, -0.027121037, 0.008251074, 0.009695507, 0.025590861, -0.016251516, 0.010823351, -0.0070440825, 0.0033769384, 0.01606684, -0.025854684, -0.017254045, -0.011324615, -0.007321097, -0.009919756, -0.03363747, -0.032977913, 0.027543154, 0.030709034, 0.01809828, 0.015948119, -0.0009464661, -0.028941417, 0.015974501, 0.015301752, -0.012472247, -0.044190403, 0.013118614, -0.021923717, -0.003604486, -0.0013471477, 0.004758713, -0.0076442803, 0.0057645394, 0.005507312, 0.008218097, 0.010071455, 0.0097878445, -0.015235797, -0.006846215, 0.0006612072, -0.009708698, 0.06252612, 0.025841493, 0.029495446, 0.0010536443, 0.018256573, -0.008567662, 0.010737609, -0.00018179075, 0.005438058, -0.018573161, -0.027332095, 0.004029901, 0.0077564055, -0.008805103, -0.008725956, -0.008501707, -0.011100366, 0.033215355, -0.00752556, -0.0020842042, -0.016792353, -0.012722879, 0.017161706, 0.012162254, -0.030920092, -0.020327587, -0.012241402, -0.018441249, -0.0010857978, 0.016317472, -0.03168518, 0.0013281854, 0.026065743, -0.011482909, -0.008969992, 0.01210949, 0.002895461, 0.005507312, 0.0040661767, 0.0029432788, 0.0033175782, -0.009068926, -0.027464006, 0.01979994, -0.0059261313, 0.002118831, 0.0012457407, -0.012914151, 0.0023843031, -0.01549962, 0.008580853, -0.006104212, 0.011047601, 0.04266023, 0.009359132, -0.015143458, -0.0077036405, -0.014048591, 0.010737609, -0.03675059, -0.00730131, 0.0015540842, 0.0047422242, -0.009299772, -0.006951744, -0.16736951, 0.0044948896, 0.009530617, -0.044137638, 0.020630984, 0.014325606, 0.03529956, 0.011106961, -0.0020940974, -0.008257669, 0.01855997, -0.018652309, -0.016884692, -0.0026283397, 0.0044322317, 0.008864463, -0.011654395, 0.01890294, 0.022833908, 0.011614821, 0.029231623, -0.014747723, 0.016145987, -0.018124662, 0.0037792688, 0.00568869, -0.020630984, 0.019562498, -0.006058043, -0.039547116, -0.024984067, 0.00012655274, 0.012261189, 0.012399696, 0.033004295, -0.0016744536, 0.03506212, -0.01799275, -0.03126306, 0.009365727, 0.008706169, 0.012927342, 0.022570085, -0.0063944175, -0.002008355, -0.012610754, 0.0007131474, -0.02229307, 0.0069451486, -0.003541828, 0.02421898, 0.0019819727, 0.011192704, -0.0045641433, -0.010572719, 0.018916132, 0.008402772, -0.001485655, -0.0027717936, -0.0063977153, -0.0025376505, -0.01753106, 0.012492034, -0.028018035, 0.0051280656, -0.013237335, -0.029389916, 0.005830495, -0.033690237, 0.03113115, -0.010889308, 0.0038353314, 0.0049862606, -0.018164234, 0.007505773, 0.008613831, -0.017465103, 0.011529079, 0.02817633, -0.0075519425, -0.012129277, -0.0020924485, -0.03113115, 0.00888425, -0.010269322, -0.0119248135, 0.011120153, 0.01788722, -0.028703976, -0.019193146, 0.0071232296, -0.0034198097, -0.009471257, 0.0014666928, 0.01131802, 0.008244478, 0.027226565, -0.0069781267, 0.0089502055, -0.0036638463, -0.0034395964, 0.004633397, -0.006892384, 0.006588987, 0.033400033, -0.0063977153, -0.016462574, -0.0035978905, 0.03126306, -0.0054611424, -0.022715187, -7.4561e-05, -0.0046531837, 0.007815765, -0.027675066, 0.011449932, -0.024007922, -0.033320885, 0.0127624525, 0.0018698478, 0.04674949, -0.00106024, 0.0035187434, 0.030286916, -0.011324615, -0.012182041, -0.11576567, -0.029442681, 0.014655385, 0.016119605, -0.009326154, 0.035167646, 0.0017296916, 0.028915035, -0.03353194, 0.029627359, -0.03485106, -0.010849734, 0.0078817215, -0.0090755215, 0.026105316, -0.009477853, -0.01069144, -0.018731454, -0.024970876, 0.013877106, 0.006767068, -0.0013743546, 0.011298234, -0.022147967, 0.009312963, -0.010401234, -0.035114884, 0.018494014, 0.015420472, -0.011628012, 0.028572064, -0.0341915, -0.007208972, -0.02162032, 0.0010544688, -0.009029353, -0.016792353, -0.026461478, 0.014048591, -0.008587449, 0.00087968586, 0.0027767404, 0.019430587, -0.007116634, -0.013863915, -0.019206338, -0.032977913, 0.035827205, -0.020406732, -0.0271738, -0.031896237, 0.005424867, -0.02738486, -0.007697045, 0.024192598, 0.024654288, 0.006707708, 0.009866992, 0.00546444, -0.020525454, -0.022029247, -0.024390465, -0.01676597, -0.0105529325, 0.008811698, 0.0021584046, -0.011957792, -0.015605149, 0.007927891, -0.02704189, 0.014787297, 0.0044751028, -0.005893153, 0.009530617, -0.017293617, -0.0066318586, -0.0043893605, -0.020644175, 0.0020363862, 0.002498077, -0.0042739375, -0.019417396, 0.011364189, -0.0069187665, -0.0158294, 0.0030240747, 0.0010214909, -0.019654837, -0.016238324, -0.04297682, -0.0076904497, 0.026791258, -0.009233816, -0.024825774, -0.010328683, -0.011792902, -0.010579315, -0.012003961, -0.010572719, 0.0033423116, -0.0027173802, -0.004936794, -0.051551074, 0.011047601, 0.008448942, -0.0045410586, 0.0020297905, -0.026131699, -0.006846215, -0.011298234, -0.0046366947, 0.009266794, -0.01696384, 0.019615263, -0.0073540746, 0.010012095, -0.006687921, -0.00033802362, 0.0112124905, 0.0035978905, 0.015882164, 0.0015062662, 0.021527981, -0.0024634502, 0.030735416, 0.015710678, 0.0028377494, 0.002907003, -0.021712659, 0.047250755, -0.01340882, -0.00018714966, -0.009728485, -0.015262178, 0.0046037165, -0.010236344, 0.0018121364, -0.005830495, -0.0022820716, 0.019325057, 0.016568104, 0.031183915, -0.017742118, -0.04392658, 0.008138949, -0.01979994, -0.006912171, -0.0021913825, -0.0010017041, 0.0033555028, 0.022266688, 0.018876558, 0.031869855, 0.018810602, -0.047461815, -0.030181387, -0.01888975, 0.0054347604, 0.035378706, 0.0049038157, -0.0004876609, 0.014351988, 0.038227998, 0.013534136, 0.011397167, -0.00055567786, -0.000688414, 0.009009566, -0.003571508, 0.013085636, 0.012716284, -0.015130267, -0.009141478, 0.0036407616, 0.008138949, 0.009286581, 0.0020281416, 0.008429155, 0.007795979, 0.01460262, -0.0038485224, 0.02830824, 0.016014075, -0.011693968, -0.00922722, 0.006730792, 0.023691334, 0.009220624, 0.00023331874, 0.0025755751, -0.026738493, -0.018467631, -0.0022392003, 0.017504677, 0.018929323, 0.0069253617, 0.0030471592, 0.003383534, -0.0048576468, 0.0037232065, 0.01415412, 0.023176879, 0.02841377, -0.013448393, -0.0030784882, -0.00786853, -0.033690237, -0.012505225, -0.027305713, -0.023559421, 0.005754646, 0.021923717, 0.019681219, 0.016673634, 0.012056725, 0.0125843715, -0.0177685, 0.037410144, -0.0022688804, -0.008646809, -0.034798294, 0.00034255808, 0.030366063, 0.008969992, 0.013560519, -0.025894258, 0.03791141, 0.015644722, 0.03023415, -0.029548211, 0.02387601, 0.012221615, -0.024007922, -0.017293617, -0.004138728, -0.0067604724, -0.03440256, -0.004692757, -0.037040792, 0.021593938, -0.017966367, 0.0762977, 0.01979994, 0.009082117, 0.02162032, -0.0026514244, -0.0019077723, 0.019113999, 0.005154448, -0.01036166, -0.0018583054, -0.0064076087, -0.0015483131, -0.013784768, -0.022253497, -0.0043365955, -0.018032324, 0.0018451143, 0.017583823, -0.010401234, -0.0052138083, 0.028440153, 0.022464555, 0.016845118, -0.01301968, -0.021092674, -0.0008994726, 0.016739588, -0.013356055, 0.00013283917, -0.02330879, 0.03532594, 0.014220077, -0.024825774, -0.01764978, -0.02115863, 0.017174898, -0.009095308, -0.016027266, 0.004851051, 0.0077564055, 0.0051445547, 0.0067208987, -0.016475765, -0.020842042, -0.014840061, 0.0035846992, -0.023493465, -0.008059802, -0.025604052], :text=&gt;"\"OpenAI\\u2019s large language models, including the models that power ChatGPT, are developed using three primary sources of information: (1) information that is publicly available on the internet, (2) information that we license from third parties, and (3) information that our users or our human trainers provide.\""}]</code></pre>
</div>
</div>
<div class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode ruby code-with-copy"><code class="sourceCode ruby"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span> <span class="vs">'cosine_similarity'</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>question <span class="kw">=</span> <span class="st">"What is open AI"</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>response <span class="kw">=</span> client<span class="at">.embeddings</span>(</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="wa">parameters: </span><span class="kw">{</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    <span class="wa">model: </span><span class="st">"text-embedding-ada-002"</span>,</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="wa">input: </span>question</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="kw">}</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>question_embedding <span class="kw">=</span> response<span class="kw">[</span><span class="vs">'data'</span><span class="kw">][</span><span class="dv">0</span><span class="kw">][</span><span class="vs">'embedding'</span><span class="kw">]</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>similarity_array <span class="kw">=</span> <span class="kw">[]</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="cn">CSV</span><span class="at">.foreach</span>(<span class="st">"embeddings.csv"</span>, <span class="wa">headers: </span><span class="dv">true</span>) <span class="cf">do</span> <span class="kw">|</span>row<span class="kw">|</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  text_embedding <span class="kw">=</span> <span class="cn">JSON</span><span class="at">.parse</span>(row<span class="kw">[</span><span class="vs">'embedding'</span><span class="kw">]</span>)</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  similarity_array <span class="kw">&lt;&lt;</span> cosine_similarity(question_embedding, text_embedding)</span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>index_of_max <span class="kw">=</span> similarity_array<span class="at">.index</span>(similarity_array<span class="at">.max</span>)</span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>original_text <span class="kw">=</span> <span class="st">""</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a><span class="cn">CSV</span><span class="at">.foreach</span>(<span class="st">"embeddings.csv"</span>, <span class="wa">headers: </span><span class="dv">true</span>)<span class="at">.with_index</span> <span class="cf">do</span> <span class="kw">|</span>row, rowno<span class="kw">|</span></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> rowno <span class="kw">==</span> index_of_max</span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>    original_text <span class="kw">=</span> row<span class="kw">[</span><span class="vs">'text'</span><span class="kw">]</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  <span class="cf">end</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a><span class="cf">end</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>prompt <span class="kw">=</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a><span class="st">"You are an AI assistant. You work for Sterling Parts which is a car parts online store located in Australia.</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a><span class="st">You will be asked questions from a customer and will answer in a helpful and friendly manner.</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a><span class="st">You will be provided company information from Sterline Parts under the [Article] section. The customer question</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a><span class="st">will be provided unders the [Question] section. You will answer the customers questions based on the article.</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a><span class="st">If the users question is not answered by the article you will respond with 'I'm sorry I don't know.'</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a><span class="st">[Article]</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a><span class="sc">#{</span>original_text<span class="sc">}</span></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a><span class="st">[Question]</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a><span class="sc">#{</span>question<span class="sc">}</span><span class="st">"</span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-44"><a href="#cb12-44" aria-hidden="true" tabindex="-1"></a>response <span class="kw">=</span> client<span class="at">.completions</span>(</span>
<span id="cb12-45"><a href="#cb12-45" aria-hidden="true" tabindex="-1"></a>  <span class="wa">parameters: </span><span class="kw">{</span></span>
<span id="cb12-46"><a href="#cb12-46" aria-hidden="true" tabindex="-1"></a>    <span class="wa">model: </span><span class="st">"text-davinci-003"</span>,</span>
<span id="cb12-47"><a href="#cb12-47" aria-hidden="true" tabindex="-1"></a>    <span class="wa">prompt: </span>prompt,</span>
<span id="cb12-48"><a href="#cb12-48" aria-hidden="true" tabindex="-1"></a>    <span class="wa">temperature: </span><span class="fl">0.2</span>,</span>
<span id="cb12-49"><a href="#cb12-49" aria-hidden="true" tabindex="-1"></a>    <span class="wa">max_tokens: </span><span class="dv">500</span>,</span>
<span id="cb12-50"><a href="#cb12-50" aria-hidden="true" tabindex="-1"></a>  <span class="kw">}</span></span>
<span id="cb12-51"><a href="#cb12-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-52"><a href="#cb12-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-53"><a href="#cb12-53" aria-hidden="true" tabindex="-1"></a><span class="fu">puts</span> response<span class="kw">[</span><span class="vs">'choices'</span><span class="kw">][</span><span class="dv">0</span><span class="kw">][</span><span class="vs">'text'</span><span class="kw">]</span></span>
<span id="cb12-54"><a href="#cb12-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-55"><a href="#cb12-55" aria-hidden="true" tabindex="-1"></a>response <span class="kw">=</span> client<span class="at">.chat</span>(</span>
<span id="cb12-56"><a href="#cb12-56" aria-hidden="true" tabindex="-1"></a>  <span class="wa">parameters: </span><span class="kw">{</span></span>
<span id="cb12-57"><a href="#cb12-57" aria-hidden="true" tabindex="-1"></a>    <span class="wa">model: </span><span class="st">"gpt-3.5-turbo"</span>,</span>
<span id="cb12-58"><a href="#cb12-58" aria-hidden="true" tabindex="-1"></a>    <span class="wa">messages: </span><span class="kw">[{</span><span class="wa">role: </span><span class="st">"user"</span>, <span class="wa">content: </span>prompt<span class="kw">}]</span>,</span>
<span id="cb12-59"><a href="#cb12-59" aria-hidden="true" tabindex="-1"></a>    <span class="wa">temperature: </span><span class="fl">0.7</span>,</span>
<span id="cb12-60"><a href="#cb12-60" aria-hidden="true" tabindex="-1"></a>  <span class="kw">}</span></span>
<span id="cb12-61"><a href="#cb12-61" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb12-62"><a href="#cb12-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-63"><a href="#cb12-63" aria-hidden="true" tabindex="-1"></a><span class="fu">puts</span> response<span class="at">.dig</span>(<span class="st">"choices"</span>, <span class="dv">0</span>, <span class="st">"message"</span>, <span class="st">"content"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>?

OpenAI is an AGI research and deployment company that is focused on ensuring that artificial general intelligence benefits all of humanity.
OpenAI is an AGI (Artificial General Intelligence) research and deployment company. Their mission is to ensure that artificial general intelligence benefits all of humanity.</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="geeknees/quarto" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->



</body></html>